# Linux CentOS系统 基础知识



[TOC]





## 学习过程中的注意事项

> **1、Linux严格区分大小写：包括文件名和目录名、命令、命令选项、配置文件设置选项等。**
>
> **2、Windows下的程序不能直接在Linux中使用**
>
> **3、Linux不靠扩展名区分文件类型：Linux系统通过权限位标识来确定文件类型**

> 常见的扩展名：
>
> - 压缩包：*.gz 、\*.bz2 、\*.zip 、\*.tar.gz 、\*tar.bz2 、\*tgz 等。
>
> - 二进制软件包：CentOS 中所使用的二进制安装包是 RPM 包，所有的 RPM 包都用".rpm"扩展名结尾，目的同样是让管理员一目了然。
>
> - 程序文件：Shell 脚本一般用 "*.sh" 扩展名结尾，其他还有用 "*.c" 扩展名结尾的 C 语言文件等。
>
> - 网页文件：网页文件一般使用 "*.php" 等结尾，不过这是网页服务器的要求，而不是 Linux 的要求。

> **4、Linux中所有内容（包括硬件设备）以文件形式保存**
>
> **5、Linux中所有存储设备都必须在挂载之后才能使用**

## UNIX

由肯•汤普森（Ken Thompson）和丹尼斯•里奇（Dennis Ritchie）发明

<img src="https://raw.githubusercontent.com/Lii-ya/PicGO1/main/202303010914439.jpeg" alt="img" style="zoom: 67%;" />

#### Solaris和FreeBSD

Solaris,它是UNIX的一个重要分支。Solaris除可以运行在 SPARC CPU 平台上外，还可以运行在 x86 CPU 平台上。在服务器市场上，Sun 的硬件平台具有高可用性和高可靠性，是市场上处于支配地位的 UNIX 系统。

FreeBSD 源于美国加利福尼亚大学伯克利分校开发的 UNIX 版本，它由来自世界各地的志愿者开发和维护，为不同架构的计算机系统提供了不同程度的支持。FreeBSD 在 BSD 许可协议下发布，允许任何人在保留版权和许可协议信息的前提下随意使用和发行，并不限制将 FreeBSD 的代码在另一协议下发行，因此商业公司可以自由地将 FreeBSD 代码融入它们的产品中。苹果公司的 OS X 就是基于 FreeBSD 的操作系统。

![img](https://raw.githubusercontent.com/Lii-ya/PicGO1/main/202303010918611.jpeg)

**UNIX和LINUX的关系/区别**

> Linux 是一个类似 Unix 的操作系统，Unix 要早于 Linux，Linux 的初衷就是要替代 UNIX，并在功能和用户体验上进行优化，所以 Linux 模仿了 UNIX（但并没有抄袭 UNIX 的源码），使得 Linux 在外观和交互上与 UNIX 非常类似。

> #### Linux之父是Linua Torvalds

## 类UNIX系统

类 UNIX 系统（英文 Unix-like）既包括各种传统的 UNIX 系统，比如 FreeBSD、OpenBSD、Sun Solaris 等，还包括与 UNIX 相似的系统，比如 Linux、QNX、Minix 等，它们都相当程度地继承了原始 UNIX 的特性，有很多相似之处，并且都在一定程度上遵守 POSIX 规范（UNIX 可移植接口规范）。

<img src="https://raw.githubusercontent.com/Lii-ya/PicGO1/main/202303010924036.png" alt="img" style="zoom:67%;" />

​                                                                                                类 UNIX 系统发展史（简明版）

***



**国内外开源社区推荐：[开源中国](https://www.oschina.net/)、[ChinaUnix](http://www.chinaunix.net/)、[GitHub](https://github.com/)、[Apache](http://www.apache.org/)、[SourceForge](https://sourceforge.net/)、**

***



## 忘记Root账户密码如何解决

#### 如何进入单用户模式？

1、重启服务，在GRUB读秒界面按任意键，进入GRUB菜单界面

![img](https://raw.githubusercontent.com/Lii-ya/PicGO1/main/202303010932420.png)

2、在想要进入单用户模式的 Linux 菜单上按"e"键，就会进入 GRUB 编辑界面

![img](https://raw.githubusercontent.com/Lii-ya/PicGO1/main/202303010932692.png)

3、在 GRUB 编辑界面中，移动光标到第二行 kernel 行，然后继续按"e"键，进入行编辑界面。在此行最后输入"空格 single"，代表启动进入单用户模式（注意：空格必须存在）

![img](https://raw.githubusercontent.com/Lii-ya/PicGO1/main/202303010932136.png)

4、然后按回车键，就会回到上一个界面，如图 2 所示。再按"b"键（启动），就会启动进入单用户模式。单用户模式是不需要输入用户名和密码就能直接进入提示符界面的

![img](https://raw.githubusercontent.com/Lii-ya/PicGO1/main/202303010933137.png)

#### 常见错误修复

**遗忘root密码**

```
[root@localhost /]# passwd root
```

![img](https://raw.githubusercontent.com/Lii-ya/PicGO1/main/202303010936080.png)

**修改系统默认运行级别**

如果我们把系统的默认运行级别修改错误，比如改为了 0 或 6，系统就不能正常启动了。这时也可以利用单用户模式进行修复，只需直接修改默认运行级别配置文件 /etc/inittab，把系统默认运行级别修改回来即可。命令如下：

```
[root@localhost /]# vi /etc/inittab
id:3:initdefault:
#把默认运行级别修改为3或5。注意：系统的默认运行级别只能使用3或5
```

***



## 关于分区



**安装Linux系统对硬盘分区时，必须有两种分区类型： 根分区和（swap）交换分区。**

> 根分区就是root分区，所有的东西都在这个分区内。 /[swap](https://so.csdn.net/so/search?q=swap&spm=1001.2101.3001.7020)分区是交换分区，是一定磁盘空间(分区或文件)，用于将部分内存中的数据换下来，以腾出内存空间用于其他需求。在一个系统中，物理内存快使用完时，操作系统会使用交换分区。



## 远程服务器关机及重启时的注意事项

**1）远程服务器在重启前，要终止正在执行的服务**

计算机的硬盘最怕在告诉存储时断电或者重启，非常容易造成硬盘损坏。

**2）重启命令的选用**

1. “shutdown -r now”重启，这条命令在重启时会正常保存和中止服务器中正在运行的程序，是安全命令。
2. ==在重启前执行“sync”命令，数据同步命令。==

**3）不要在服务器访问高峰期运行高负载命令**

**4）远程配置防火墙时不要把自己踢出服务器**

防火墙是指将内网和外网分开，并依照数据包的 IP 地址、端口号和数据包中的数据来判断是否允许数据包通过的网络设备。

**5）指定合理的密码规范并定期更新**

**6）合理分配权限**

管理服务器要遵守一个最基本的原则，==“给予用户最小的权限”==

在实际的工作中，越是重要的服务器，对权限的管理越严格。原则上，在能够完成工作的前提下，分配的权限越小越安全。当然，权限越小，你需要做的规划和权限分配任务就越多，但是服务器也越可靠。

**7）定期备份重要数据和日志**

### 远程管理工具

**putty远程管理工具**

“端口”根据使用的协议有所区别（选择不同的“连接类型”选项，端口会自动变化），一般选择“SSH”或“Telnet”，这取决于 Linux 服务器所提供的服务。

> 建议选择 SSH，Telnet 服务密码会被明文传输，安全性较差，目前大多数 UNIX/Linux 系统默认禁用 Telent。

**Secure CRT远程管理工具**

***



## 系统目录

```
├── bin -> usr/bin # 用于存放二进制命令
├── boot # 内核及引导系统程序所在的目录
├── dev # 所有设备文件的目录（如磁盘、光驱等）
├── etc # 配置文件默认路径、服务启动命令存放目录
├── home # 用户家目录，root用户为/root
├── lib -> usr/lib # 32位库文件存放目录
├── lib64 -> usr/lib64 # 64位库文件存放目录
├── media # 媒体文件存放目录
├── mnt # 临时挂载设备目录
├── opt # 自定义软件安装存放目录
├── proc # 进程及内核信息存放目录
├── root # Root用户家目录
├── run # 系统运行时产生临时文件，存放目录
├── sbin -> usr/sbin # 系统管理命令存放目录
├── srv # 服务启动之后需要访问的数据目录
├── sys # 系统使用目录
├── tmp # 临时文件目录
├── usr # 系统命令和帮助文件目录
└── var # 存放内容易变的文件的目录
```





## 文件结构

#### Linux根目录（/）

FHS 认为，Linux 系统的根目录（/）最为重要（没有之一），其原因有以下 2 点：

1. 所有目录都是由根目录衍生出来的；
2. 根目录与系统的开机、修复、还原密切相关；

| 一级目录 |                       **功能（作用）**                       |
| :------: | :----------------------------------------------------------: |
|  /bin/   | 存放系统命令，普通用户和 root 都可以执行。放在 /bin 下的命令在单用户模式下也可以执行 |
|  /boot/  | 系统启动目录，保存与系统启动相关的文件，如内核文件和启动引导程序（grub）文件等 |
|  /dev/   |                       设备文件保存位置                       |
|  /etc/   | 配置文件保存位置。系统内所有采用默认安装方式（rpm 安装）的服务配置文件全部保存在此目录中，如用户信息、服务的启动脚本、常用服务的配置文件等 |
|  /home/  | 普通用户的主目录（也称为家目录）。在创建用户时，每个用户要有一个默认登录和保存自己数据的位置，就是用户的主目录，所有普通用户的主目录是在 /home/ 下建立一个和用户名相同的目录。如用户 liming 的主目录就是 /home/liming |
|  /lib/   |                   系统调用的函数库保存位置                   |
| /media/  |       挂载目录。系统建议用来挂载媒体设备，如软盘和光盘       |
|  /mnt/   | 挂载目录。早期 Linux 中只有这一个挂载目录，并没有细分。系统建议这个目录用来挂载额外的设备，如 U 盘、移动硬盘和其他操作系统的分区 |
|  /misc/  | 挂载目录。系统建议用来挂载 NFS 服务的共享目录。虽然系统准备了三个默认挂载目录 /media/、/mnt/、/misc/，但是到底在哪个目录中挂载什么设备可以由管理员自己决定。例如，笔者在接触 Linux 的时候，默认挂载目录只有 /mnt/，所以养成了在 /mnt/ 下建立不同目录挂载不同设备的习惯，如 /mnt/cdrom/ 挂载光盘、/mnt/usb/ 挂载 U 盘，都是可以的 |
|  /opt/   | 第三方安装的软件保存位置。这个目录是放置和安装其他软件的位置，手工安装的源码包软件都可以安装到这个目录中。不过笔者还是习惯把软件放到 /usr/local/ 目录中，也就是说，/usr/local/ 目录也可以用来安装软件 |
|  /root/  | root 的主目录。普通用户主目录在 /home/ 下，root 主目录直接在“/”下 |
|  /sbin/  | 保存与系统环境设置相关的命令，只有 root 可以使用这些命令进行系统环境设置，但也有些命令可以允许普通用户查看 |
|  /srv/   | 服务数据目录。一些系统服务启动之后，可以在这个目录中保存所需要的数据 |
|  /tmp/   | 临时目录。系统存放临时文件的目录，在该目录下，所有用户都可以访问和写入。建议此目录中不能保存重要数据，最好每次开机都把该目录清空 |

#### Linux /usr目录

usr（注意不是 user），全称为 Unix Software Resource，此目录用于存储系统软件资源。FHS 建议所有开发者，应把软件产品的数据合理的放置在 /usr 目录下的各子目录中，而不是为他们的产品创建单独的目录。

> Linux 系统中，所有系统默认的软件都存储在 /usr 目录下，/usr 目录类似 Windows 系统中 C:\Windows\ + C:\Program files\ 两个目录的综合体。

#### Linux /var目录

/var 目录用于存储动态数据，例如缓存、日志文件、软件运行过程中产生的文件等。

##### Linux文件系统的层次结构

![img](https://raw.githubusercontent.com/Lii-ya/PicGO1/main/202303011018180.png)

- 在文件系统中，有两个特殊的目录，一个是用户所在的工作目录，即当前目录，可用一个点“.”表示；另一个是当前目录的上一层目录，也叫父目录，用两个点“..”表示。
- 如果一个目录或文件名是以一个点开始，就表示这个目录或文件是一个隐藏目录或文件。即以默认方式査找（后续会讲查找命令）时，不显示该目录或文件。

#### Linux中一些皆文件

Linux系统中，文件可以具体分为以下：

**1) 普通文件**

类似 mp4、pdf、html 这样，可直接拿来使用的文件都属于普通文件，Linux 用户根据访问权限的不同可以对这些文件进行查看、删除以及更改操作。

**2）目标文件**

Linux 系统中，目录文件包含了此目录中各个文件的文件名以及指向这些文件的指针，打开目录等同于打开目录文件，只要你有权限，可以随意访问目录中的任何文件。

**3）字符设备文件和块设备文件**

这些文件通常隐藏在 /dev/ 目录下，当进行设备读取或外设交互时才会被使用。

> 例如，磁盘光驱属于块设备文件，串口设备则属于字符设备文件。

**4）套接字文件（socket）**

套接字文件一般隐藏在 /var/run/ 目录下，用于进程间的网络通信。

**5) 符号链接文件（symbolic link）**

指向另一文件的简介指针（软连接）

**6）管道文件**

主要用于进程间通信。例如，使用 mkfifo 命令创建一个 FIFO 文件，与此同时，启用进程 A 从 FIFO文件读数据，启用进程 B 从 FIFO文件中写数据，随写随读。

## 什么是挂载

挂载，==指的就是将设备文件的顶级目录连接到Linux根目录下的某一目录（最好是空目录），访问此目录就等同于访问设备文件==

> 并不是根目录下任何一个目录都可以作为挂载点，由于挂载操作会使得原有目录中文件被隐藏，因此根目录以及系统原有目录都不要作为挂载点，会造成系统异常甚至崩溃，挂载点最好是新建的空目录。

##### 例子：

过命令行访问某个 U 盘中的数据

![img](https://raw.githubusercontent.com/Lii-ya/PicGO1/main/202303011011158.png)

​                                                                         U盘文件目录结构和Linux系统中的文件结构

可以看到，目前 U 盘和 Linux 系统文件分属两个文件系统，还无法使用命令行找到 U 盘文件，需要将两个文件系统进行挂载。

接下来，在根目录下新建一个目录 /sdb-u，通过挂载命令将 U 盘文件系统挂载到此目录

![img](https://raw.githubusercontent.com/Lii-ya/PicGO1/main/202303011014230.png)

可以看到，U 盘文件系统已经成为 Linux 文件系统目录的一部分，此时访问 /sdb-u/ 就等同于访问 U 盘。

> 根目录下的 /dev/ 目录文件负责所有的硬件设备文件，事实上，当 U 盘插入 Linux 后，系统也确实会给 U 盘分配一个目录文件（比如 sdb1），就位于 /dev/ 目录下（/dev/sdb1），但无法通过 /dev/sdb1/ 直接访问 U 盘数据，访问此目录只会提供给你此设备的一些基本信息（比如容量）。

## Linux绝对路径和相对路径

指明一个文件存放的位置，有两种方法，分别是使用绝对路径和相对路径

==**绝对路径一定是由 根目录 / 开始写起。**==

例如，使用绝对路径的表示方式指明 bin 文件所在的位置，该路径应写为 /usr/bin，测试代码如下：

```
[root@localhost ~]# bin
bash： bin： command not found   <-- 没有找到
[root@localhost ~]# /usr/bin
bash: /usr/bin: is a directory   <-- 是一个文件
```

如果仅传递给Linux系统一个文件名，它是无法找到指定文件的；而将bin文件的绝对路径传递给Linux系统时，它就可以成功找打。

**相对路径不是从根目录 / 开始写起，==而是从当前所在的工作目录开始写起==。使用相对路径表明某文件的存储位置时，经常会用到前面讲到的 2 个特殊目录，即当前目录（用 . 表示）和父目录（用 .. 表示）。**

举个例子，当使用 root 身份登录 Linux 系统时，当前工作目录默认为 /root，如果此时需要将当前工作目录调整到 root 的子目录 Desktop 中，当然可以使用绝对路径，示例代码如下：

```
[root@localhost ~]# pwd     <-- 显示当前所在的工作路径
/root
[root@localhost ~]# cd /root/Desktop
[root@localhost Desktop]# pwd
/root/Desktop
```

可以看到，通过使用绝对路径，我们成功地改变了当前工作路径。但除此之外，使用相对路径的方式会更简单。因为目前处于 /root 的位置，而 Desktop 就位于当前目录下，所以：、

```
[root@localhost ~]# pwd    <-- 显示当前所在的工作路径
/root
[root@localhost ~]# cd ./Desktop
[root@localhost Desktop]# pwd
/root/Desktop
```

##### 如果以 root 身份登录 Linux 系统，并实现将当前工作目录由 /root 转换为 /usr 目录，有以下 2 种方式：

```
#使用绝对路径
[root@localhost ~]# pwd <-- 显示当前所在的工作路径
/root
[root@localhost ~]# cd /usr
[root@localhost ~]# pwd
/usr
#使用相对路径
[root@localhost ~]# pwd <-- 显示当前所在的工作路径
/root
[root@localhost ~]# cd ../usr <-- 相对 root，usr 位于其父目录 /，因此这里要用到 ..
[root@localhost ~]# pwd
/usr
```

> 总之，绝对路径是相对于根路径 / 的，只要文件不移动位置，那么它的绝对路径是恒定不变的；而相对路径是相对于当前所在目录而言的，随着程序的执行，当前所在目录可能会改变，因此文件的相对路径不是固定不变的。

### 文件和目录的命名规则：

1. 除了字符“/”之外，所有的字符都可以使用，但是要注意，在目录名或文件名中，使用某些特殊字符并不是明智之举。例如，在命名时应避免使用 <、>、？、* 和非打印字符等。如果一个文件名中包含了特殊字符，例如空格，那么在访问这个文件时就需要使用引号将文件名括起来。
2. 目录名或文件名的长度不能超过 255 个字符。
3. 目录名或文件名是区分大小写的。如 DOG、dog、Dog 和 DOg ，是互不相同的目录名或文件名，但使用字符大小写来区分不同的文件或目录，也是不明智的。
4. 与 Windows 操作系统不同，文件的扩展名对 Linux 操作系统没有特殊的含义，换句话说，Linux 系统并不以文件的扩展名开分区文件类型。例如，dog.exe 只是一个文件，其扩展名 .exe 并不代表此文件就一定是可执行文件。